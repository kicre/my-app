" å¯åŠ¨è¯­æ³•æ£€æµ‹
syntax enable
syntax on
filetype plugin indent on

" æŒ‰é”®è®¾ç½®
nmap <space> :
nmap rc : e $HOME/_vimrc
nmap <F5> :UndotreeToggle<CR>          " 
nmap ff :NERDTreeToggle<CR> 

" å­—ç¬¦ç¼–ç è®¾ç½®
set fileencodings=utf-8,gbk,big5,ucs-bom,latin1
set fileencoding=utf-8
let &termencoding=&encoding
set encoding=utf-8
source $VIMRUNTIME/delmenu.vim
source $VIMRUNTIME/menu.vim

" é¡µé¢è®¾ç½®
set backspace=indent,eol,start        " å¼€å¯é€€æ ¼ï¼Œè·¨è¡Œé€€æ ¼
set foldmethod=indent
set foldlevel=99                      " ä»£ç æŠ˜å 
set laststatus=2                      " ä¿ç•™å‘½ä»¤è¡Œ
set scrolloff=5                       " åœ¨ä¸Šä¸‹ç§»åŠ¨å…‰æ ‡æ—¶ï¼Œå…‰æ ‡ä¸Šæ–¹æˆ–è€…ä¸‹æ–¹è‡³å°‘ä¼šä¿ç•™æ˜¾ç¤ºçš„è¡Œæ•°
set guifont=NotoMono_NF:h12

" å…¶ä»–è®¾ç½®
set showcmd                           " æ˜¾ç¤ºè¾“å…¥çš„å‘½ä»¤
set showmatch                         " è®¾ç½®åŒ¹é…æ¨¡å¼ï¼Œæ˜¾ç¤ºåŒ¹é…çš„æ‹¬å·
set mouse=a                           " ä½¿é¼ æ ‡å¯ç”¨
set magic                             " è®¾ç½®é­”æœ¯
set number                            " æ˜¾ç¤ºè¡Œå·
set relativenumber                    " æ˜¾ç¤ºç›¸å¯¹è¡Œå·
set nocompatible                      " å»æ‰è®¨åŒçš„æœ‰å…³viä¸€è‡´æ€§æ¨¡å¼ï¼Œé¿å…ä»¥å‰çš„ç‰ˆæœ¬çš„ä¸€äº›æ¼æ´å’Œå±€é™
set backspace=indent,eol,start        " ä½¿é€€æ ¼é”®å¯ä»¥æ­£å¸¸ä½¿ç”¨
"set noswapfile                        " ç¦æ­¢ç”Ÿæˆä¸´æ—¶æ–‡ä»¶
set autoread                          " å½“æ–‡ä»¶è¢«æ”¹åŠ¨æ—¶è‡ªåŠ¨è½½å…¥
set completeopt=longest,menu          " è®©Vimçš„è¡¥å…¨æ‰å½“è¡Œä¸ºä¸ä¸€èˆ¬IDEä¸€è‡´
set wildmenu
set wildmode=list:full                " åœ¨å‘½ä»¤è¡Œä¸­ï¼ŒæŒ‰ä¸‹Tabé”®ï¼Œæ˜¾ç¤ºå½“å‰æ‰€æœ‰å¯èƒ½çš„å‘½ä»¤
set softtabstop=4                     " ä½¿ç”¨é€€æ ¼é”®ï¼Œåˆ é™¤ç©ºæ ¼æ—¶ï¼Œå¯ä»¥ä¸€æ¬¡åˆ é™¤å››ä¸ªç©ºæ ¼
set fileformat=unix
set updatetime=300

" è®¾ç½®Tabç›¸å…³è®¾ç½®
set tabstop=4                         " è®¾ç½®åˆ¶è¡¨ç¬¦tabé”®çš„å®½åº¦ä¸º4ç©ºæ ¼
set expandtab                         " ç”¨ç©ºæ ¼æ›¿ä»£åˆ¶è¡¨ç¬¦
set list                              " å°†ç©ºæ ¼,åˆ¶è¡¨ç­‰ç©ºç™½å­—ç¬¦éƒ½ç”¨ç‰¹æ®Šå¯è§å­—ç¬¦æ˜¾ç¤ºå‡ºæ¥"
set listchars=tab:>-,trail:-          " å®šä¹‰æ˜¾ç¤ºç©ºç™½å­—ç¬¦çš„ç‰¹æ®Šå¯è§å­—ç¬¦
set shiftwidth=4                      " è‡ªåŠ¨ç¼©è¿›ä½¿ç”¨4ä¸ªç©ºæ ¼"


" è®¾ç½®å½“å‰ç¼“å†²åŒºçš„æœç´¢é€‰é¡¹
set ignorecase                        " å¿½ç•¥å¤§å°å†™
set smartcase                         " å¼€å¯æ™ºèƒ½å¤§å°å†™æ•æ„Ÿ
set hlsearch                          " é«˜äº®æœç´¢å¾—åˆ°çš„ç»“æœ
set incsearch                         " å¼€å¯é€’å¢æœç´¢æ¨¡å¼,éšç€é”®å…¥å¾…æœç´¢æ–‡æœ¬ï¼Œä¸æ–­çš„è¿›è¡Œæœç´¢
set conceallevel=0
set laststatus=2
set nocompatible
set hidden


" é«˜äº®å…‰æ ‡æ‰€åœ¨è¡Œå’Œåˆ—
set cursorline                        " é«˜äº®å…‰æ ‡æ‰€åœ¨è¡Œ
set cursorcolumn                      " é«˜äº®å…‰æ ‡æ‰€åœ¨åˆ—
set nobackup
set nowritebackup
set t_TI= t_TE=
set fillchars=vert:\ 

"packadd termdebug



" æ’ä»¶è®¾ç½®
" vim-Plug å®‰è£…çš„æ’ä»¶åˆ—è¡¨ Base URL: https://github.com
call plug#begin('~/.config/vimPlugin')
Plug 'vim-airline/vim-airline'
Plug 'vim-airline/vim-airline-themes'
Plug 'mattf1n/vimmarp'
Plug 'mbbill/undotree'
Plug 'preservim/nerdtree'
Plug 'dense-analysis/ale'
call plug#end()

" ALE
"å§‹ç»ˆå¼€å¯æ ‡å¿—åˆ—
let g:ale_sign_column_always = 1
let g:ale_set_highlights = 0
"è‡ªå®šä¹‰errorå’Œwarningå›¾æ ‡
let g:ale_sign_error = 'âŒ'
let g:ale_sign_warning = 'ğŸ”°'
"åœ¨vimè‡ªå¸¦çš„çŠ¶æ€æ ä¸­æ•´åˆale
let g:ale_statusline_format = ['âœ— %d', 'âš¡ %d', 'âœ” OK']
"æ˜¾ç¤ºLinteråç§°,å‡ºé”™æˆ–è­¦å‘Šç­‰ç›¸å…³ä¿¡æ¯
let g:ale_echo_msg_error_str = 'E'
let g:ale_echo_msg_warning_str = 'W'
let g:ale_echo_msg_format = '[%linter%] %s [%severity%]'
"æ™®é€šæ¨¡å¼ä¸‹ï¼Œspå‰å¾€ä¸Šä¸€ä¸ªé”™è¯¯æˆ–è­¦å‘Šï¼Œsnå‰å¾€ä¸‹ä¸€ä¸ªé”™è¯¯æˆ–è­¦å‘Š
nmap sp <Plug>(ale_previous_wrap)
nmap sn <Plug>(ale_next_wrap)
"<Leader>sè§¦å‘/å…³é—­è¯­æ³•æ£€æŸ¥
nmap <Leader>s :ALEToggle<CR>
"<Leader>dæŸ¥çœ‹é”™è¯¯æˆ–è­¦å‘Šçš„è¯¦ç»†ä¿¡æ¯
nmap <Leader>d :ALEDetail<CR>
"set statusline=%F%m%r%h%w\ [FORMAT=%{&ff}]\ [TYPE=%Y]\ [POS=%l,%v][%p%%]\ %{strftime(\"%d/%m/%y\ -\ %H:%M\")}\ %{ALEGetStatusLine()}
"cpp NOT C++
let g:ale_linters = {
\   'cpp': ['gcc'],
\   'c': ['gcc'],
\   'python': ['pylint'],
\}


" ç¼–è¯‘
map  <F9>  :w<CR>:call Run()<CR>
imap <F9>  <ESC>:w<CR>:call Run()<CR>
map  <F10> :w<CR>:call Debug()<CR>
imap <F10> <ESC>:w<CR>:call Debug()<CR>

func!  Debug()
    if expand("%:e") == "c" || expand("%:e") == "cc" || expand("%:e") == "cxx" || expand("%:e") == "cpp"
        exe ":setlocal makeprg=".'g++\ %\ -o\ %<\ -gstabs+'
        echohl WarningMsg | echo " compiling..."
        silent make
        exe ":!gdb %<"
        redraw!
        echohl WarningMsg | echo " Debug finish! :-)"
    else
        redraw!
        echo "Language not support! :-("
    endif
endfunc

func! Run()
    if expand("%:e") == "py"
        ! Python -u "%<.py"
        redraw!
        echohl WarningMsg | echo " Running finish! :-)"
    elseif expand("%:e") == "c" || expand("%:e") == "cc" || expand("%:e") == "cxx" || expand("%:e") == "cpp"
        echo " compiling..."
        :! g++ "%" -o "%<" && "%<.exe"
        redraw!
        echohl WarningMsg | echo " Running finish! :-)"
    elseif expand("%:e") == "r"
        exe ":! Rscript %"
        redraw!
        echohl WarningMsg | echo " Running finish! :-)"
    elseif expand("%:e") == "vbs"
        exe ":! %"
        redraw!
        echohl WarningMsg | echo " Running finish! :-)"
        redraw!
        echohl WarningMsg | echo " Running finish! :-)"
    elseif expand("%:e") == "md"
        :MarkdownPreview
        redraw!
        echohl WarningMsg | echo " Running on Chrome! :-)"
    elseif expand("%:e") == "tex"
        "<localleader>ll
        \\ll
        ":vimtex-compile
    else
        redraw!
        echo "Language not support! :-("
    endif
endfunction

